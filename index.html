<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Vertical Recorder â€“ Local</title>

<style>
/* === STILE BASE === */
:root{
  --bg:#0b0c10;--text:#eef1ff;--muted:#9aa0b4;
  --line:rgba(255,255,255,.12);
  --accent:#ff2d55;--good:#31d158;
  --r:18px;
  --font:system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--text);font-family:var(--font)}
input,textarea,button{font-family:inherit}

.app{height:100%;display:flex;flex-direction:column;padding:10px;gap:10px}
.card{background:rgba(255,255,255,.04);border:1px solid var(--line);border-radius:var(--r);padding:12px}
.hint{font-size:12px;color:var(--muted)}
.field label{font-size:12px;color:var(--muted)}
.field input,.field textarea{
  width:100%;padding:12px;border-radius:14px;
  background:rgba(0,0,0,.35);border:1px solid var(--line);
  color:var(--text);font-size:15px
}
textarea{min-height:120px}
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
.btn{
  padding:12px 14px;border-radius:14px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--line);
  color:var(--text);font-weight:800;cursor:pointer
}
.btn.primary{background:rgba(255,45,85,.18);border-color:rgba(255,45,85,.4)}
.btn.good{background:rgba(49,209,88,.18);border-color:rgba(49,209,88,.4)}
.preview{font-size:14px;white-space:pre-wrap}
</style>
</head>

<body>
<div class="app">

<!-- DATI LOCALI -->
<div class="card">
  <div style="font-weight:900;margin-bottom:6px">Dati locali</div>
  <div class="hint">Questi dati vengono salvati e riutilizzati automaticamente</div>

  <div class="field">
    <label>Paese</label>
    <input id="town" placeholder="Es. Condove">
  </div>

  <div class="field">
    <label>Nome funzionario</label>
    <input id="officer" placeholder="Es. Christian Raimondi">
  </div>

  <div class="field">
    <label>Telefono</label>
    <input id="phone" placeholder="Es. 346 256 8685">
  </div>
</div>

<!-- SCRIPT -->
<div class="card">
  <div style="font-weight:900;margin-bottom:6px">Script video</div>

  <div class="field">
    <label>Hook (Domanda)</label>
    <textarea id="hook" placeholder="Hai una casa vuota a {{PAESE}}?"></textarea>
  </div>

  <div class="field">
    <label>Script</label>
    <textarea id="script" placeholder="A {{PAESE}} molte case restano ferme perchÃ©..."></textarea>
  </div>
</div>

<!-- CAPTION -->
<div class="card">
  <div class="row" style="justify-content:space-between">
    <div style="font-weight:900">Caption automatica</div>
    <button class="btn" id="copy">Copia</button>
  </div>
  <div class="preview" id="caption"></div>
</div>

</div>

<script>
/* === STORAGE === */
const get = k => localStorage.getItem(k)||"";
const set = (k,v)=>localStorage.setItem(k,v);

/* === ELEMENTI === */
const town = document.getElementById("town");
const officer = document.getElementById("officer");
const phone = document.getElementById("phone");
const hook = document.getElementById("hook");
const script = document.getElementById("script");
const captionBox = document.getElementById("caption");

/* === LOAD === */
town.value = get("town");
officer.value = get("officer");
phone.value = get("phone");
hook.value = get("hook");
script.value = get("script");

/* === PLACEHOLDER === */
function apply(t){
  return t
    .replaceAll("{{PAESE}}", town.value||"â€”")
    .replaceAll("{{FUNZIONARIO}}", officer.value||"â€”")
    .replaceAll("{{TEL}}", phone.value||"â€”");
}

/* === CAPTION === */
function build(){
  const cap =
`${apply(hook.value)}

#immobiliare #venderecasa #${(town.value||"locale").toLowerCase()}

${officer.value}
Immobiliare La Sacra
ðŸ“ ${town.value}
ðŸ“ž ${phone.value}`;
  captionBox.textContent = cap;
}

/* === EVENTS === */
[town,officer,phone,hook,script].forEach(el=>{
  el.addEventListener("input",()=>{
    set(el.id,el.value);
    build();
  });
});

document.getElementById("copy").onclick=()=>{
  navigator.clipboard.writeText(captionBox.textContent);
  alert("Caption copiata");
};

/* INIT */
build();
</script>
</body>
</html>
