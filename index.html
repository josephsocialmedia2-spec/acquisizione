
<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Acquisizione Subito</title>
<style>
body{margin:0;font-family:system-ui;background:#0b0e1a;color:#fff}
h1{margin:12px;text-align:center}
main{padding:12px}
.box{background:#121737;border-radius:18px;padding:14px}
.btn{width:100%;padding:18px;margin:8px 0;border-radius:14px;border:none;font-weight:900;font-size:18px}
.rec{background:#ff2d2d}
.stop{background:#555}
.send{background:#2bd576}
small{opacity:.7}
</style>
</head>
<body>
<h1>‚ñ∂ ACQUISIZIONE SUBITO</h1>
<main>
<div class="box">
<p><b>VAI IN VIA ROMA</b><br/>PARTI DAL CIVICO 1<br/>FERMA LA PRIMA PERSONA</p>
<p>‚ÄúCiao, sto lavorando con proprietari della zona per capire se qualcuno sta valutando di vendere nei prossimi mesi. Anche solo per informazione, posso farti 2 domande veloci?‚Äù</p>
<button class="btn rec" id="rec">üî¥ REC</button>
<button class="btn stop" id="stop" disabled>‚èπ STOP</button>
<button class="btn send" id="send" disabled>üì§ INVIA A JOSEPH</button>
<small id="info"></small>
</div>
</main>
<script>
let mediaRecorder, chunks=[], blob=null;
const rec=document.getElementById('rec');
const stop=document.getElementById('stop');
const send=document.getElementById('send');
const info=document.getElementById('info');

rec.onclick=async()=>{
 const stream=await navigator.mediaDevices.getUserMedia({video:true,audio:true});
 mediaRecorder=new MediaRecorder(stream);
 mediaRecorder.ondataavailable=e=>chunks.push(e.data);
 mediaRecorder.onstop=()=>{
   blob=new Blob(chunks,{type:'video/webm'});
   send.disabled=false;
   info.textContent='Video pronto';
 };
 mediaRecorder.start();
 rec.disabled=true; stop.disabled=false;
};
stop.onclick=()=>{
 mediaRecorder.stop();
 rec.disabled=false; stop.disabled=true;
};
send.onclick=async()=>{
 if(!blob) return;
 const file=new File([blob],'acquisizione.webm',{type:'video/webm'});
 if(navigator.canShare && navigator.canShare({files:[file]})){
   await navigator.share({files:[file],text:'Acquisizione Subito',title:'Video'});
 } else {
   alert('Condivisione file non supportata su questo dispositivo.');
 }
};
</script>
</body>
</html>
